{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{% block title %}Legends Restaurant{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'restaurant/style.css' %}">
</head>

<body class="lr-body">

    <!-- ================= HEADER ================= -->
    <header class="lr-header">
        <div class="lr-logo">Legends Restaurant</div>

        <nav class="lr-nav">
            <a href="{% url 'home' %}">Home</a>

            {% if request.user.is_authenticated %}

                <!-- Ø§Ù„Ø­Ø³Ø§Ø¨ + Ø§Ù„ÙŠÙˆØ²Ø± -->
                <a href="{% url 'customer_dashboard' %}" class="nav-account">
                    ğŸ‘¤ {{ request.user.username }}
                </a>

                <!-- Cart -->
                <a href="{% url 'cart_view' %}">Cart ğŸ›’</a>

                <!-- Staff / Manager Ù„Ùˆ ÙƒØ§Ù† Ù…ÙˆØ¸Ù Ø£Ùˆ Ù…Ø¯ÙŠØ± -->
                {% if request.user.role == "staff" %}
                    <a href="{% url 'staff_dashboard' %}">Staff</a>
                {% elif request.user.role == "manager" %}
                    <a href="{% url 'manager_dashboard' %}">Manager</a>
                {% endif %}

                <a href="{% url 'logout' %}">Logout</a>

            {% else %}
                <a href="{% url 'login' %}">Login</a>
                <a href="{% url 'signup' %}">Sign Up</a>
            {% endif %}
        </nav>
    </header>

    <!-- ================= MAIN ================= -->
    <main class="lr-main">
        {% block content %}

        {% if request.user.is_authenticated and request.user.role == "customer" %}
        <!-- Banner Section -->
        <section style="
            background: #F4E1FF;
            padding: 14px 18px;
            border-radius: 14px;
            margin: 16px auto 8px;
            max-width: 980px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            color: #2E2140;
        ">
            <div>
                <h2 style="margin: 0; font-size: 1.3rem;">
                    Welcome, {{ request.user.username }}! ğŸ‘‹
                </h2>
                <p style="margin: 4px 0 0; font-size: 0.95rem;">
                    Glad to have you back at Legends Restaurant.
                </p>
            </div>

            <a href="{% url 'edit_customer_account' %}" 
               style="
                    display:inline-flex;
                    align-items:center;
                    gap:6px;
                    background:#8064A2;
                    color:white;
                    padding:9px 14px;
                    border-radius:999px;
                    text-decoration:none;
                    font-size:0.9rem;
                    font-weight:600;
                ">
                âš™ï¸ Edit Account
            </a>
        </section>
        {% endif %}

        <!-- ================= HERO ================= -->
        <section class="lr-hero">
            <div class="lr-hero-text">
                <h1>Order your favorite dishes</h1>
                <p>Soft purple vibes, smooth experience. Legends Restaurant takeaway &amp; delivery.</p>

                {% if request.user.is_authenticated %}
                    <a href="{% url 'customer_dashboard' %}" class="lr-btn-primary">Go to Dashboard</a>
                {% else %}
                    <a href="{% url 'login' %}" class="lr-btn-primary">Start Ordering</a>
                {% endif %}
            </div>
        </section>

        <!-- ================= MENU ================= -->
        <section class="lr-menu-section">
            <h2 class="lr-section-title">Todayâ€™s Menu</h2>

            <div class="lr-menu-grid">
                {% if menu_items %}
                    {% for item in menu_items %}
                    <article class="lr-menu-card">
                        <div class="lr-menu-image"></div>
                        <h3 class="lr-menu-title">{{ item.name }}</h3>
                        <p class="lr-menu-desc">{{ item.description }}</p>

                        <div class="lr-menu-footer">
                            <span class="lr-menu-price">
                                <img src="{% static 'restaurant/sar-logo.png' %}" class="sar-icon">
                                {{ item.price }}
                            </span>

                            <form action="{% url 'add_to_cart' item.id %}" method="post">
                                {% csrf_token %}
                                <button class="lr-btn-secondary">Add to cart</button>
                            </form>
                        </div>
                    </article>
                    {% endfor %}
                {% else %}
                    <p>No items available.</p>
                {% endif %}
            </div>
        </section>

        {% endblock %}
    </main>

    <!-- ================= FOOTER ================= -->
    <footer class="lr-footer">
        Â© {{ now|date:"Y" }} Legends Restaurant â€“ Takeaway &amp; Delivery
    </footer>

</body>
</html>

