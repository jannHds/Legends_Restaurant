{% extends "restaurant/base.html" %}
{% load static %}

{% block content %}

<section class="lr-menu-section">
    <h1 class="lr-section-title">Checkout</h1>
    <p style="margin-bottom: 20px; color:#666;">
        Review your order before confirming.
    </p>

    {% if cart_items %}
        <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù†ÙŠÙˆ: Ù†ÙØ³ ÙƒØ±ÙˆØª Ø§Ù„Ù…Ù†ÙŠÙˆ (Ù¤ Ø£Ø¹Ù…Ø¯Ø©) -->
        <div class="lr-menu-grid">
            {% for c in cart_items %}
                <article class="lr-menu-card">

                    {% if c.item.image %}
                        <img src="{{ c.item.image.url }}" alt="{{ c.item.name }}" class="lr-menu-photo">
                    {% endif %}

                    <h3 class="lr-menu-title">{{ c.item.name }}</h3>
                    <p class="lr-menu-desc">
                        {{ c.item.description|default:"No description." }}
                    </p>

                    <div class="lr-menu-footer">
                        <!-- Ø³Ø¹Ø± Ø§Ù„ÙˆØ§Ø­Ø¯ -->
                        <span class="lr-menu-price">
                            <img src="{% static 'restaurant/sar-logo.png' %}" class="sar-icon" alt="SAR">
                            {{ c.item.price }}
                        </span>

                        <!-- Ø§Ù„ÙƒÙ…ÙŠØ© + Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø·Ø± -->
                        <div style="text-align:right; font-size:14px; color:#555;">
                            Qty: <strong>{{ c.quantity }}</strong><br>
                            Line total:
                            <strong>
                                <img src="{% static 'restaurant/sar-logo.png' %}" class="sar-icon" alt="SAR">
                                {{ c.total_price }}
                            </strong>
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>

        <!-- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨ + Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ + Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
        <div style="margin-top: 30px; display:flex; justify-content:space-between; align-items:center; gap:20px; flex-wrap:wrap;">

            <!-- Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ -->
            <div style="font-size:18px; font-weight:700; color:#4b4d73;">
                Total:
                <img src="{% static 'restaurant/sar-logo.png' %}" class="sar-icon" alt="SAR">
                {{ cart_total }}
            </div>

            <!-- Ø§Ù„ÙÙˆØ±Ù…: Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ + Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
            <form method="post" style="display:flex; gap:15px; align-items:center; flex-wrap:wrap;">
                {% csrf_token %}

                <!-- ðŸ”¹ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: Takeaway / Delivery -->
                <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                    <span style="font-weight:600; color:#4b4d73;">Order type:</span>

                    <label style="display:flex; align-items:center; gap:4px; font-size:14px;">
                        <input type="radio" name="order_type" value="takeaway" checked>
                        Takeaway
                    </label>

                    <label style="display:flex; align-items:center; gap:4px; font-size:14px;">
                        <input type="radio" name="order_type" value="delivery">
                        Delivery
                    </label>
                </div>

                <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
                <a href="{% url 'cart_view' %}" class="lr-btn-secondary" style="text-decoration:none;">
                    Back to cart
                </a>
                <button type="submit" class="lr-btn-primary">
                    Confirm order &amp; pay
                </button>
            </form>
        </div>

    {% else %}
        <div class="lr-cart-empty">
            <p>No items in your cart yet.</p>
            <a href="{% url 'home' %}" class="lr-btn-primary">Browse Menu</a>
        </div>
    {% endif %}
</section>

{% endblock %}
