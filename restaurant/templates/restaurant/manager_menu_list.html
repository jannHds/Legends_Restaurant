{% load static %}

<link rel="stylesheet" href="{% static 'restaurant/style.css' %}">

<div class="menu-container">
    <h1 class="page-title">Manage Menu</h1>

    <!-- Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯ -->
    <button class="add-item-btn" onclick="toggleAddForm()">+ Add New Item</button>

    <!-- ÙÙˆØ±Ù… Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
    <div id="add-form" class="add-form hidden">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="add_item" value="1">
            {{ form.as_p }}
            <button class="add-submit-btn">Add Item</button>
        </form>
    </div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± -->
    <div class="menu-grid">
        {% for item in menu_items %}
        <div class="menu-card">

            <!-- Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ÙŠØ³Ø§Ø±: Ø§Ù„ØµÙˆØ±Ø© + Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
            <div class="menu-main">
                {% if item.image %}
                    <img src="{{ item.image.url }}" class="menu-image">
                {% else %}
                    <div class="menu-image placeholder"></div>
                {% endif %}

                <div class="menu-info">
                    <h3 class="menu-name">{{ item.name }}</h3>
                    <p class="menu-desc">{{ item.description }}</p>
                    <p class="menu-price">Price: {{ item.price }} SAR</p>
                    <p class="menu-category">Category: {{ item.get_category_display }}</p>

                    <p class="menu-status">
                        Status:
                        {% if item.is_available %}
                            <span class="status available">Available</span>
                        {% else %}
                            <span class="status unavailable">Unavailable</span>
                        {% endif %}
                    </p>
                </div>
            </div>

            <!-- Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ÙŠÙ…ÙŠÙ†: Ø£ÙƒØ´Ù†Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
            <div class="menu-actions">
                <a href="{% url 'edit_menu_item' item.id %}" class="btn-small btn-edit">âœŽ Edit</a>
                <a href="{% url 'delete_menu_item' item.id %}" class="btn-small btn-delete">ðŸ—‘ Delete</a>
                <a href="{% url 'toggle_availability' item.id %}" class="btn-small btn-toggle">âŸ³ Toggle</a>
            </div>

        </div>
        {% empty %}
        <p class="empty-msg">No menu items added yet.</p>
        {% endfor %}
    </div>
</div>

<!-- JavaScript - Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ¥Ø®ÙØ§Ø¡ ÙÙˆØ±Ù… Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
<script>
function toggleAddForm() {
    document.getElementById("add-form").classList.toggle("hidden");
}
</script>
